# Practical on IAM

Must have AWS account!! if not have AWS account then ask friend to create IAM user!!

## Sign in with IAM user
![alt text](image.png)

for accountID we have Alias of it!!

![alt text](image-1.png)

MFA code for all!!

![alt text](image-2.png)

AWS console!!

Search for IAM and you get it!

![alt text](image-3.png)

see here click on red mark icon!!CLI to run AWS commands directy!!

![alt text](<Screenshot 2024-08-29 235207.png>)

Click on that red mark

![alt text](image-4.png)

AWS CloudShell is a browser-based, pre-authenticated shell that you can launch directly from the AWS Management Console. You can navigate to CloudShell from the AWS Management Console a few different ways. 

you click on? it will lead to AWs support 

![alt text](image-5.png)

Basic support is free !!
we need to create case for any support we need!!

![](image-6.png)

Technical support not available in basic plan!!

Here you can see its IAM user not user!! on that you can see AccountID!! see below image!!

![alt text](image-7.png)

max Ec2 instance you can create is 20 in fresh account!! all that info yu can see in Service Quotas!!

![alt text](<Screenshot 2024-09-01 234340.png>)

lets see IAm service!!

Every service has its own dashboard
![alt text](image-8.png)

see security recommendations we need to rotate the keys after a year!! so that old one is not used again!!

![](image-9.png)

see here you need to create alias !! this should be unique!!
![alt text](image-10.png)

>Note:
see the selected one is IAM user sign in link!! All The IAm user of that root user will use same sign in link!! as all member of home use same link to go into a home!!

>alias will not take name give something like mohitCloud!! don't just give name!


On clicking on left side Users you will be able to see all users!!

![alt text](image-11.png)  
## Steps to create IAM user
Step 1: Sign in to the AWS Management Console
Go to the AWS Management Console and sign in to your AWS account.

Step 2: Navigate to IAM

You can see the Dashboard we have seen before:
![alt text](image-12.png)

Step 3: Access the Users Page
In the IAM dashboard, click on ‚ÄúUsers‚Äù in the left navigation pane.
![alt text](image-13.png)

Step 4: Add User
Click ‚ÄúAdd user‚Äù to begin creating a new user.


Step 5: Enter User Details
Provide a username for the new user.


In this process, if you wish to create a user with access to the AWS Management Console, you must enable the checkbox that provides access to the console. However, if you do not need access to the console and only require a programmatic user, you can leave the checkbox disabled and proceed with the other steps.

![alt text](image-16.png)

We first generate autogenerated password and then user will be forced to put his own password when he first login!! 


Step 6: Set Permissions
In the permissions step, you can either add the user to an existing group, attach policies directly, or skip this step to add permissions later.


Here, I‚Äôll attach a policy directly as follows. When you choose to attach a policy directly, you‚Äôll see a list of predefined policies. You can select one or more policies based on your specific requirements. In this example, I will attach the ‚ÄúAccess to S3‚Äù policy, which grants the user access to AWS S3 features.

![alt text](image-15.png)

These orange color cube tells aws managed policy and rest are customer managed policy!!

If you‚Äôre not satisfied with the predefined policies or they don‚Äôt match your specific requirements, you have the option to create a custom policy by clicking the ‚ÄúCreate policy‚Äù button. This way, you can define a policy that aligns with your exact needs.

Step 7: Review and Create
Review your configuration, and click ‚ÄúCreate user‚Äù to complete the process.

![alt text](image-14.png)

Step 8: See the User Details

------------------

While creating user adding policies you see filter

![](image-17.png)

AWS managed and customer managed we know

based on job you have we have policies called AWS managed-job function like gor DBA what kind of policy we need and so on for other type of jobs!!

![](image-18.png)

see above according to different roles different policies are selected!! If selected administrative access, then the account already have all permissions!!  Also we have boundary permissions which tells how many permission max you can have on a user!!

![](image-19.png)

> Password will be visible only one time !! copy it somewhere or download excel!!

### User created

![alt text](image-20.png)

ARN --> Amazon resource name

You can see everything you have put !!We have only used managed policy !! not inline one which is written in AWS!! 

> You can attach at max 10 policy to user

## Creating an IAM Groupüë•
Creating an IAM group consolidates permissions for multiple users:

Step 1: Navigate to Groups
In the IAM dashboard, choose ‚ÄúGroups‚Äù from the left navigation pane.

Step 2: Create Group
Click ‚ÄúCreate group‚Äù to initiate the group creation process.

Step 3: Add Users
Select users to add to the group. Group permissions will apply to all members.

![alt text](image-21.png)

Step 4: Attach Policies
Associate policies that define group permissions.

Step 5: Review and Create
Review the group details and click ‚ÄúCreate group.‚Äù Then you can see your group is created Successfully.

On Users > select a user > Groups --> here you can change group properties or directly going to group from left side!!

Tags we can have max  50 for a resource!!

![alt text](image-22.png)

see 47 left!!

To reset password of a user

Go to security credentials

Click on manage console access
![alt text](image-23.png)

Then this screen will appear where you can reset console password for IAM user

![alt text](image-24.png)

You can also disable account from same location

![alt text](image-25.png)

 set up MFA

 ![alt text](image-26.png)

 Use authenticator app ,use google authenticator

 Then you can get steps on the screen!!

To remove MFA

![alt text](image-27.png)

## Setting up MFA for root user
To setup MFA you must have an AWS account. Log in to the AWS account using your credentials 

Step 1:
After login to AWS console, search for IAM service from the top services drop-down search box and select IAM.

AWS Services drop-down screen

Step 2: Click on Activate MFA on your root account tab and click manage MFA.

IAM service screen

Step 3: Click on the Multi-factor authentication tab and select Activate MFA.


Step 4: Select the Virtual MFA device option to add your app(Google authenticator/Microsoft authenticator) based TOTPs. If you have any other devices for the TOTP generation you can select the others as well and click on continue.


Step 5: Before step 4, download Google authenticator or Microsoft authenticator to your phone or laptop.download Google authenticator from the play store. Install the app and open to add your AWS account for 2 step-verification.

Now go to your AWS screen to scan QR code using your authenticator app.


Scan your screen‚Äôs QR code using the authenticator app

Step 5: After scanning the QR code, your authenticator app will start generating 6 digits OTP. We need to add two successive 6 digits OTP to below input boxes MFA Code 1 and MFA Code 2 to add MFA to your AWS account.


Click on Assign MFA after giving MFA Code 1 and 2. That's it, you have added 2FA for your AWS account.

Now, try log-out and log-in again to check the 2FA, after submitting the password, it will ask for 6 digits OTP, which you need to provide it from the App which you have configured before.


You can also generate keys for IAm user so that he can login by CLI!!Keys will be visible only one time!! so save it once done!!

To create a new key you must delete old one and then create new one!

To delete a key first deactivate and then delete!!

To disable pragmatical access just delete keys!!

## IAM Access Advisor:
Click on the Users tab, then click on the desired user. Now click on the ‚ÄúAccess Advisor‚Äù tab, this will show you when some services were last used, and recent activity.

## Revision
## How can Users access AWS?
A User has 3 options to access the AWS console:
1. AWS Management Console (password + MFA, what we‚Äôve been suing so far in this walkthrough)
2. AWS Command Line Interface (CLI) (protected by ‚Äúaccess keys‚Äù)
3. AWS Software Developer Kit (SDK) (for code: protected by ‚Äúaccess keys‚Äù)
Note: Access keys are generated through the AWS Console. Users manage their own access keys. DO NOT share your access keys, treat them as passwords.

## Tasks
![alt text](image-28.png)