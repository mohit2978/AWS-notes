# Lecture 31 notes

previous lecture we have seen the script

![alt text](image.png)


httpd is a web server!!

/var/ww/html is apache application place!!apache search for application in that place only!!

multiple ec2 instance create image and create ec2 from that!!

## Load balancer

1. in user data we put this script and launch 2 ec2 instances!!

2. to access application we use http or https 
protocol 

    Encryption certificate for https protocol is done in amazon certificate manager (ACM) this is billable so we ue http only!!

    allow http protocol in security group!!

3. make sure application working on ec2 take ip and
 check protocol and if not working check security group or syntax of code


4. first we create target group and then we create application load balancer

5. we also nee to configure health check of application!!and we expect 200 status code

6. load balancer listens on http on port 80 for https 443. the load balancer 
should be internet facing!! if it is internal facing then private load balancer !!
if you want that load balancer should work in vpc we use internal facing!!

![alt text](image-1.png)
---

> In user data do not forget to put script!!


we put application in 2 ec2 instance!!use free tier red hat then only above script will work!!

let's try creating target group!!

![alt text](image-2.png)

on left side we have target group!!  click on create target group!!

![alt text](image-3.png)

we have target as instances then we have group name 

then tell about the protocol you are using!!

then ip either ipv4 or ipv6!!then vpc !!then choose protocol version!!

![alt text](image-4.png)

then health check url !!put application url!!put /index.html(do not forget to put /)!!

 let's see advanced!!

 healthy threshold  consecutive checks to get to know the application is healthy!!
 
 unhealthy threshold consecutive checks to get to know if application is unhealthy!

Timeout time it wait to get response!!

interval time difference between two health checks!!

this health checks will happen for each nad every ec2 instance in which application is there!!

then click on next

then we need to register ec2 instance!!
![alt text](image-5.png)

select and click on include as pending below!!

and then click on create target group!!


now on target group you see the target group! and then see 
targets in target group!!

![alt text](image-6.png)

to get same type  server use option actions>images and security > launch more like this!!

     
## create load balancer
- go to load balancer then create  select application load balancer
- give name and then internet facing then ipv4 dual stack means both ipv4 and ipv6
- select AZ and security group
- then on listeners select target group!!
- for security we have AWS web application firewall (WAF) billable similarly
global accelerator
- just click on create load balancer

we use dns name to access load balancer!!

![alt text](image-7.png)

our load balancer is provisioning !! wait till it get active!!
to get a good url we can use route53!!


we use dns name to get to our website!!

![alt text](image-8.png)

see on server 1 first

![alt text](image-9.png)

then on server 2!!

this is load balancing!!

